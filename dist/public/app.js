(()=>{"use strict";var e={636:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OpponentBoardManager=t.PlayerBoardManager=t.BoardManager=void 0;const o=n(628),s=n(768);class r{constructor(){this.boardView=new s.BoardView(6,5)}}t.BoardManager=r,t.PlayerBoardManager=class extends r{constructor(){super(),this.currentGuess="",this.guessCount=0,this.RegisterListeners()}AddChar(e){this.currentGuess.length>=5||(this.currentGuess+=e,this.boardView.UpdateGuess(this.currentGuess,this.guessCount))}Delete(){this.currentGuess.length<=0||(this.currentGuess=this.currentGuess.slice(0,-1),this.boardView.UpdateGuess(this.currentGuess,this.guessCount))}Submit(){5===this.currentGuess.length&&(document.dispatchEvent(new o.SubmitGuessEvent(this.currentGuess)),this.currentGuess="",this.guessCount++)}UpdateGameState(e){this.boardView.UpdateWords(e.playerMoves)}RegisterListeners(){document.addEventListener(o.SubmitCommand.name,(e=>{this.Submit()})),document.addEventListener(o.AddCharCommand.name,(e=>{const t=e;this.AddChar(t.detail)})),document.addEventListener(o.DeleteCommand.name,(e=>{this.Delete()})),document.addEventListener(o.GameStateEvent.name,(e=>{const t=e;this.UpdateGameState(t.detail)}))}},t.OpponentBoardManager=class extends r{constructor(){super(),this.RegisterListeners()}RegisterListeners(){document.addEventListener(o.GameStateEvent.name,(e=>{const t=e;this.UpdateGameState(t.detail)}))}UpdateGameState(e){this.boardView.UpdateWords(e.opponentMoves)}}},516:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClientManager=void 0;const o=n(719);var s;function r(e){return window.fetch(`${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.json()))}t.ClientManager=class{constructor(){this.lobbyId="",this.playerId="",this.state=s.LoggedOut}StartLobby(){if(this.state!==s.LoggedOut)throw"Already connected to server!";r("/start_lobby").then((e=>{this.lobbyId=e.lobbyId,this.playerId=e.playerId,this.state=s.LoggedIn,console.log(`client id: ${e}`)}))}JoinLobby(e){if(this.state!==s.LoggedOut)throw"Already connected to server!";r(`/join_lobby/${e}`).then((e=>{this.lobbyId=e.lobbyId,this.playerId=e.playerId,this.state=s.LoggedIn,console.log(`client id: ${e}`)}))}GetState(){if(this.state!==s.LoggedIn)throw"Not connected to server!";r(`/get_state/${this.lobbyId}/${this.playerId}`).then((e=>{console.log(`game state: ${e}`)}))}SubmitMove(e){if(this.state!==s.LoggedIn)throw"Not connected to server!";var t,n;t=`/submit_move/${this.lobbyId}`,n=new o.Move(e,this.playerId),window.fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})}},function(e){e[e.None=0]="None",e[e.LoggedOut=1]="LoggedOut",e[e.LoggedIn=2]="LoggedIn"}(s||(s={}))},628:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameStateEvent=t.PlayerToMoveEvent=t.SubmitGuessEvent=t.AddCharCommand=t.DeleteCommand=t.SubmitCommand=void 0;class n extends CustomEvent{constructor(){super(n.name)}}t.SubmitCommand=n;class o extends CustomEvent{constructor(){super(o.name)}}t.DeleteCommand=o;class s extends CustomEvent{constructor(e){super(s.name,{detail:e})}}t.AddCharCommand=s;class r extends CustomEvent{constructor(e){super(r.name,{detail:e})}}t.SubmitGuessEvent=r;class a extends CustomEvent{constructor(){super(a.name)}}t.PlayerToMoveEvent=a;class d extends CustomEvent{constructor(e){super(d.name,{detail:e})}}t.GameStateEvent=d},122:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameManager=void 0;const o=n(636),s=n(87),r=n(300);var a;t.GameManager=class{constructor(){this.state=a.WaitingForGame,this.network=new r.NetworkInterface,this.playerBoard=new o.PlayerBoardManager,this.opponentBoard=new o.OpponentBoardManager,this.input=new s.InputManager,this.network.Connect()}},function(e){e[e.None=0]="None",e[e.WaitingForGame=1]="WaitingForGame",e[e.WaitingForMove=2]="WaitingForMove",e[e.PlayerToMove=3]="PlayerToMove"}(a||(a={}))},87:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputManager=void 0;const o=n(628);t.InputManager=class{constructor(){this.registerKeyboardEvents()}registerKeyboardEvents(){document.addEventListener("keyup",(e=>{const t=String(e.key).toUpperCase();if("BACKSPACE"!==t){if("ENTER"!==t)return!t.match("[A-Z]+")||t.length>1?void 0:void document.dispatchEvent(new o.AddCharCommand(t));document.dispatchEvent(new o.SubmitCommand)}else document.dispatchEvent(new o.DeleteCommand)}))}}},300:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkInterface=void 0;const o=n(516),s=n(628),r=n(83);t.NetworkInterface=class{constructor(){this.client=new o.ClientManager,this.RegisterListeners()}RegisterListeners(){document.addEventListener(s.SubmitGuessEvent.name,(e=>{const t=e;this.client.SubmitMove(t.detail)}))}Connect(){const e=(0,r.FetchLobbyId)();null===e?this.client.StartLobby():this.client.JoinLobby(e)}}},611:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WordKnowledge=t.LetterState=void 0,(n=t.LetterState||(t.LetterState={}))[n.None=0]="None",n[n.Grey=1]="Grey",n[n.Yellow=2]="Yellow",n[n.Green=3]="Green",t.WordKnowledge=class{constructor(e,t){this.letterKnowledge=e,this.guess=t}}},83:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FetchLobbyId=t.GenerateRandomLobbyId=t.ToLobbyId=void 0,t.ToLobbyId=function(e){return e},t.GenerateRandomLobbyId=function(){return Math.floor(1e5*Math.random()).toString()},t.FetchLobbyId=function(){const e=new URLSearchParams(window.location.search);return"lobbyId"in e?e.get("lobbyId"):null}},719:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Move=void 0,t.Move=class{constructor(e,t){this.player=e,this.guess=t}}},768:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BoardView=void 0;const o=n(611);t.BoardView=class{constructor(e,t){this.letterBoxes=[];const n=document.getElementById("game"),o=document.createElement("div");o.className="game-board";for(let n=0;n<e;n++){const e=[],n=document.createElement("div");n.className="letter-row";for(let o=0;o<t;o++){const t=document.createElement("div");t.className="letter-box",n.appendChild(t),e.push(t)}null==o||o.appendChild(n),this.letterBoxes.push(e)}null==n||n.appendChild(o),this.Clear()}UpdateWords(e){for(let t=0;t<e.length;t++){const n=this.letterBoxes[t],o=e[t].knowledge.guess,s=e[t].knowledge.letterKnowledge;for(let e=0;e<n.length;e++){const t=n[e];this.UpdateColor(t,s[e]),t.innerText=o[e]}}}UpdateGuess(e,t){const n=this.letterBoxes[t];for(let t=0;t<n.length;t++)t<e.length?n[t].innerText=e[t]:n[t].innerText=""}Clear(){this.letterBoxes.forEach((e=>{e.forEach((e=>{e.innerText="",this.UpdateColor(e,o.LetterState.None)}))}))}UpdateColor(e,t){switch(t){case o.LetterState.None:e.style.backgroundColor="white";break;case o.LetterState.Yellow:e.style.backgroundColor="yellow";break;case o.LetterState.Green:e.style.backgroundColor="green";break;case o.LetterState.Grey:e.style.backgroundColor="grey"}}}}},t={};new(function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(122).GameManager)})();